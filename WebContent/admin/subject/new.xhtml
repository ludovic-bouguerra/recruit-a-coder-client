<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/template/admin.xhtml">
	<ui:define name="admin-content">
		<h:form styleClass="form-horizontal">
			<fieldset>
				<legend>Création d'un nouveau sujet</legend>
				<div class="control-group">

					<h:outputLabel styleClass="control-label" for="title">Titre <span
							class="requis">*</span>
					</h:outputLabel>
					<div class="controls">
						<h:inputText id="title" value="#{subjectViewBean.subject.title}"
							required="true" size="20" maxlength="60" />
					</div>
					<h:message id="titleMessage" for="title" errorClass="erreur" />
					<br />
				</div>
				<div class="control-group">
					<h:outputLabel styleClass="control-label" for="enonce">Sujet <span
							class="requis">*</span>
					</h:outputLabel>
					<div class="controls">

						<p:editor id="enonce" value="#{subjectViewBean.subject.enonce}"
							required="true" />
					</div>
					<h:message id="enonceMessage" for="enonce" errorClass="erreur" />
				</div>
				<br />
				<div class="control-group">
					<h:outputLabel styleClass="control-label" for="difficulty">Difficultée <span
							class="requis">*</span>
					</h:outputLabel>
					<div class="controls">
						<h:inputHidden id="difficulty"
							value="#{subjectViewBean.subject.difficulty}" />
						<p:slider minValue="0" maxValue="5" for="difficulty"
							required="true" />
					</div>
					<h:message id="difficultyMessage" for="difficulty"
						errorClass="erreur" />
				</div>
				<h:messages globalOnly="true" infoClass="info" />
				<div class="control-group">
					<h:outputLabel styleClass="control-label" for="difficulty">Durée du sujet <span
							class="requis">*</span>
					</h:outputLabel>
					<div class="controls">
						<p:calendar value="#{subjectViewBean.subject.timeLimit}" pattern="HH:mm" id="limit" timeOnly="true" />  
					</div>
					<h:message id="limitMessage" for="limit"
						errorClass="erreur" />
				</div>

			</fieldset>
			<fieldset>
				<legend>Liste des cas de tests</legend>
				<table class="table">
					<thead>
						<tr>
							<td>Identifiant</td>
							<td>Description</td>
							<td>Actions</td>
						</tr>
					</thead>
					<tbody>
						<ui:repeat value="#{subjectViewBean.subject.testCases}"
							varStatus="testCase">
							<tr>
								<td><h:outputText
										value="#{subjectViewBean.subject.testCases[testCase.index].id}" /></td>
								<td><h:outputText
										value="#{subjectViewBean.subject.testCases[testCase.index].description}" /></td>
								<td></td>
							</tr>
						</ui:repeat>
					</tbody>
				</table>
			</fieldset>
			<fieldset>
				<legend>Nouveau cas de tests</legend>
				<div class="control-group">

					<h:outputLabel styleClass="control-label" for="title">Titre <span
							class="requis">*</span>
					</h:outputLabel>
					<div class="controls">
						<h:inputText id="description"
							value="#{subjectViewBean.testCase.description}" required="true"
							size="20" maxlength="60" />
					</div>
					<h:message id="descriptionMessage" for="title" errorClass="erreur" />
					<br />
				</div>
				<div class="control-group">
					<h:outputLabel styleClass="control-label" for="difficulty">Input <span
							class="requis">*</span>
					</h:outputLabel>
					<div class="controls">

						<h:inputTextarea id="input"
							value="#{subjectViewBean.testCase.input}" required="true" />
					</div>
					<h:message id="inputMessage" for="difficulty" errorClass="erreur" />
				</div>

				<div class="control-group">
					<h:outputLabel styleClass="control-label" for="output">Ouput data <span
							class="requis">*</span>
					</h:outputLabel>
					<div class="controls">
						<h:inputTextarea id="output"
							value="#{subjectViewBean.testCase.expected}" required="true" />
					</div>
					<h:message id="outputMessage" for="difficulty" errorClass="erreur" />
				</div>
				<div class="control-group">
					<h:outputLabel styleClass="control-label" for="visible">Jeu de données visible : <span
							class="requis">*</span>
					</h:outputLabel>
					<div class="controls">

						<h:selectBooleanCheckbox id="visible"
							value="#{subjectViewBean.testCase.visible}" />
					</div>
					<h:message id="visibleMessage" for="visible" errorClass="erreur" />
				</div>
			</fieldset>
			<h:commandLink action="#{subjectViewBean.addTestCase()}"
				value="Ajouter" styleClass="link" />
			<h:commandButton value="Enregistrement" action="#{subjectBean.save}"
				styleClass="btn btn-inverse" />
		</h:form>

		<h:form>
			<h:commandLink action="welcome.xhtml" value="Retour"
				styleClass="link" />
		</h:form>

	</ui:define>
</ui:composition>
</html>